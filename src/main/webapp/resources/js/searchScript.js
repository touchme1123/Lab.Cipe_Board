// DB 데이터

let recipeData1 = {
    recipeId: 1,
    bookmark: false,
    category: "westernFood",
    material: "빵, 고기",
    dishName: "햄버거",
    recipeText: "고기 구워",
    writeDate: "2024-2-14",
    dishImg:
      "https://i.namu.wiki/i/o5lE3DhCB9NCYp_AzyPszyOblhB7JDtoWaFiV6H3NNUpKxiwyRaG0fn_XEWzc43fv5uI2cV4EDOrMth9tsbslA.webp",
  };
  let recipeData2 = {
    recipeId: 2,
    bookmark: true,
    category: "westernFood",
    material: "토마토 소스, 파스타 면",
    dishName: "파스타",
    recipeText: "면 끌여",
    writeDate: "2024-2-14",
    dishImg:
      "https://i.namu.wiki/i/_Y1KfAkYUNsL3o_nt_ok1BVfJJwEEO8xiVHMzsQO7fWvvtFwBAWWavROORH3dGOGtBry2kP77hhOnHNPk4Xz5Q.webp",
  };
  
  let recipeData3 = {
    recipeId: 3,
    bookmark: false,
    category: "westernFood",
    material: "밀가루, 치즈",
    dishName: "피자",
    recipeText: "야.. 이건 시켜먹자",
    writeDate: "2024-2-14",
    dishImg:
      "https://i.namu.wiki/i/umI-heVYVS9miQNqXM13FRUOHHL4l1nzsZgN9XRLFG7nI_7Dyf-Myr6HmiWf9Qd7SAZQz3WYSQHPXXtGAwLTag.webp",
  };
  
  let recipeData4 = {
    recipeId: 4,
    bookmark: false,
    category: "westernFood",
    material: "소고기",
    dishName: "스태이크",
    recipeText: "구워~",
    writeDate: "2024-2-14",
    dishImg:
      "https://i.namu.wiki/i/8HjXHmgc7e_5KZVmId552aTeMjiaDhyamd_XO9WUzD0AIG9jK4c6ULrJrec8MZMFiFm8tNO6wbr6sNGJkzbFJw.webp",
  };
  
  let recipeData5 = {
    recipeId: 5,
    bookmark: false,
    category: "chineseFood",
    material: "홍합, 오징어",
    dishName: "짬뽕",
    recipeText: "보글보글",
    writeDate: "2024-2-14",
    dishImg:
      "https://i.namu.wiki/i/upNZ7cYsFsAfU0KcguO6OHMK68xC-Bj8EXxdCti61Jhjx10UCBgdK5bZCEx41-aAWcjWZ5JMKFUSaUGLC1tqWg.webp",
  };
  
  let recipeData6 = {
    recipeId: 6,
    bookmark: false,
    category: "chineseFood",
    material: "면, 짜장",
    dishName: "짜장면",
    recipeText: "보글보글",
    writeDate: "2024-2-14",
    dishImg:
      "https://i.namu.wiki/i/j2AxLP9AtrcJebh4DVfGxowfXwI3a95dG_YZb_Ktczc6Ca7ACyd_NJL3YHQMw8SABGTQiJDwSpySOSSBLZVEZw.webp",
  };
  
  let recipeData7 = {
    recipeId: 7,
    bookmark: false,
    category: "japaneseFood",
    material: "돼지고기, 빵가루",
    dishName: "돈가스",
    recipeText: "튀겨",
    writeDate: "2024-2-14",
    dishImg:
      "https://i.namu.wiki/i/aN7eMJzy4XAy1yqpL3kHb41MBsSdfPjt1ZqMfDXYk6J3-je6M8dNVOMldpbxhZ-IlO9IfHXMzpZc1tVvat5IjQ.webp",
  };
  let recipeData8 = {
    recipeId: 8,
    bookmark: false,
    category: "japaneseFood",
    material: "생선, 밥",
    dishName: "초밥",
    recipeText: "낚시 부터..",
    writeDate: "2024-2-14",
    dishImg:
      "https://i.namu.wiki/i/x8ahJqwvEyKkM0zVH-QJVFEVvFDrKnNfhQpvzPFM7DrOz5U0AsV4cgDe2R9xxfoe5Dt_EupPfgrP3-HlO2BXQA.webp",
  };
  
  let recipeData9 = {
    recipeId: 9,
    bookmark: true,
    category: "japaneseFood",
    material: "메밀, 무",
    dishName: "메밀소바",
    recipeText: "보글보글",
    writeDate: "2024-2-14",
    dishImg:
      "https://i.namu.wiki/i/q90KM4HtKZ_but8KDP06TQoj7pNzrdxgBnXoWFCr-L7rW2z4SLm6Z-Xt06M5UHSSqGRy4OxpAUG5BfqGxzVn3w.webp",
  };
  
  let recipeData10 = {
    recipeId: 10,
    bookmark: false,
    category: "koreanFood",
    material: "김치, 돼지고기",
    dishName: "김치찌개",
    recipeText: "보글보글",
    writeDate: "2024-2-14",
    dishImg:
      "https://i.namu.wiki/i/8drgvI-cQLUfJDC00zbl2ZolK4W3o4ZkVSpR-zM5FZk_QzT58vYnx_7ohk0qwGYYiSLPiZgwccyIEFUtYKDjUQ.webp",
  };
  
  let recipeData11 = {
    recipeId: 11,
    bookmark: true,
    category: "koreanFood",
    material: "된장, 야채",
    dishName: "된장찌개",
    recipeText: "끓여",
    writeDate: "2024-2-14",
    dishImg:
      "https://i.namu.wiki/i/YO50_C3aCdAuE-lGan7O4jySABF2vYoC2zlzo7BNY0fFYvE_QjRE9hhz8Ni7YT56SISxSO2iacP0eTsO8DbdXQ.webp",
  };
  let recipeData12 = {
    recipeId: 12,
    bookmark: false,
    category: "koreanFood",
    material: "소고기, 야채",
    dishName: "불고기",
    recipeText: "볶아",
    writeDate: "2024-2-14",
    dishImg:
      "https://i.namu.wiki/i/1fMv9BlDolXCcO2TlBW0zuV14FbmYAQf71zBGjY8RvtoP3x-zDBo0jiQxy4gdQ8ipfOqa9NNgGc5AOPVfRHlzQ.webp",
  };
  
  let recipeData13 = {
    recipeId: 13,
    bookmark: false,
    category: "koreanFood",
    material: "돼지고기, 야채",
    dishName: "제육볶음",
    recipeText: "볶아",
    writeDate: "2024-2-14",
    dishImg:
      "https://i.namu.wiki/i/hdmtB9UgCj1Y8ojfYf-TOjWPRnhjYHA9wsWH-jofsvvabZBT5aDCbNXrPieh2yxS9IyZ0ERMO9ZObRJKa4GIiw.webp",
  };
  // DB 데이터
  
  // 가저온 데이터들을 배열로 만들어주기
  let recipesArr = [
    recipeData1,
    recipeData2,
    recipeData3,
    recipeData4,
    recipeData5,
    recipeData6,
    recipeData7,
    recipeData8,
    recipeData9,
    recipeData10,
    recipeData11,
    recipeData12,
    recipeData13,
  ];
  // 가저온 데이터들을 배열로 만들어주기


const searchList = document.getElementById("searchList");

function showSearchList(val='') {
  searchList.innerText = "";
  const res = recipesArr.forEach(recipe => {
      if(recipe.dishName.includes(val)) {
          const li = document.createElement('li');
          li.innerText = `
              <p>${recipe.dishName}</p>
          `
          searchList.appendChild(li);
      }
  })
}

const searchInput = document.getElementById("searchInput");
const searchBtn = document.getElementById("searchBtn");
let val = ""

searchInput.addEventListener("keydown", function(e) {
    if(e.keyCode === 13) {
        e.preventDefault();
        val = searchInput.value;
        location.href = "/searchList.html";
        console.log(val);
        //showSearchList(val);
        searchList.innerText = val;
    }
});

searchBtn.addEventListener("click", function(e) {
    val = searchInput.value;
    location.href = "/searchList.html";
    console.log(val);
    //showSearchList(val);
    //searchRecipe();
    searchList.innerText = val;
});

function searchRecipe() {
let searchText = val; // 입력된 검색어를 소문자로 변환하여 공백을 제거
const searchResults = recipesArr.filter(r => 
    r.dishName.toLowerCase().includes(searchText) || 
    r.material.toLowerCase().includes(searchText) || 
    r.recipeText.toLowerCase().includes(searchText) || 
    r.category.toLowerCase().includes(searchText)
); // 검색어가 요리명, 재료, 조리 방법, 카테고리 중 하나에 포함되는 레시피를 찾음

if (searchResults.length > 0) {
    // 검색 결과가 있을 경우
    searchList.innerHTML = ""; // 기존의 목록을 비움
    searchResults.forEach(recipe => {
        // 검색 결과를 화면에 표시
        let dishNameBtn = document.createElement("button");
        dishNameBtn.className = "dishNameBtn";
        dishNameBtn.id = recipe.recipeId;
        dishNameBtn.innerText = recipe.dishName;
        ul.appendChild(dishNameBtn);

        let recipeList = document.createElement("li");
        recipeList.className = "recipeList";
        recipeList.style.display = "none";
        ul.appendChild(recipeList);

        dishNameBtn.addEventListener("click", dishNameBtnClick);

        let recipeContent = document.createElement("div");
        recipeContent.className = "recipeContent";
        recipeList.appendChild(recipeContent);

        let dishImg = document.createElement("img");
        dishImg.className = "dishImg";
        dishImg.src = recipe.dishImg;
        recipeContent.appendChild(dishImg);

        let recipeText = document.createElement("div");
        recipeText.className = "recipeText";
        recipeContent.appendChild(recipeText);

        let showMaterial = document.createElement("p");
        showMaterial.className = "showMaterial";
        showMaterial.innerText = "재료 : " + recipe.material;
        recipeText.appendChild(showMaterial);

        let showRecipe = document.createElement("p");
        showRecipe.className = "showRecipe";
        showRecipe.innerText = "조리 방법 : " + recipe.recipeText;
        recipeText.appendChild(showRecipe);

        let showDate = document.createElement("p");
        showDate.className = "showDate";
        showDate.innerText = recipe.writeDate;
        recipeList.appendChild(showDate);

        let showId = document.createElement("p");
        showId.className = "showId";
        showId.innerText = "Post ID: " + recipe.recipeId;
        recipeList.appendChild(showId);
    });
} else {
    // 검색 결과가 없을 경우
    searchList.innerHTML = "<p>검색 결과가 없습니다.</p>"; // 화면에 메시지를 표시
}
}